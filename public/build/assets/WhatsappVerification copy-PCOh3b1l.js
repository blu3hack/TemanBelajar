import{r as d,a as x,u as k,j as t}from"./app-5fGJYEJs.js";import{M as D}from"./message-circle-TZRn3FLG.js";import{A as C}from"./arrow-right-l2ZCHU_z.js";import{C as M}from"./check-DxbLE-XU.js";import"./createLucideIcon-DDKrHHNZ.js";function S(){var f;const[o,m]=d.useState(["","","","","",""]),[n,p]=d.useState(!1),{token:c,name:V,no_wa:u}=x().props,i=d.useRef([]),l=k({otp:"",token:c}),b=e=>{e=e.replace(/\D/g,""),e.startsWith("0")&&(e="62"+e.slice(1)),e.startsWith("62")||(e="62"+e);const s=e.substring(2,5),r=e.substring(5,9),a=e.substring(9,13);return`+62 ${s}-${r}-${a}`};d.useEffect(()=>{var e;(e=i.current[0])==null||e.focus()},[]);const g=(e,s)=>{var a;if(s.length>1&&(s=s[0]),!/^\d*$/.test(s))return;const r=[...o];r[e]=s,m(r),s&&e<5&&((a=i.current[e+1])==null||a.focus())},j=(e,s)=>{var r;s.key==="Backspace"&&!o[e]&&e>0&&((r=i.current[e-1])==null||r.focus())},w=e=>{var r;e.preventDefault();const s=e.clipboardData.getData("text").slice(0,6).split("");if(s.every(a=>/^\d$/.test(a))){const a=[...o];s.forEach((N,h)=>{h<6&&(a[h]=N)}),m(a),(r=i.current[Math.min(s.length,5)])==null||r.focus()}},y=e=>{e.preventDefault(),l.post(route("verify-wa"),{data:{otp:o.join(""),token:c},preserveScroll:!0})},v=()=>{var e;m(["","","","","",""]),p(!1),(e=i.current[0])==null||e.focus()};return console.log("OTP yang dikirim:",o.join("")),console.log("Token yang dikirim:",c),console.log("Errors dari server:",l.errors),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-teal-50 flex items-center justify-center p-3 sm:p-4",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-6 sm:p-8 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-40 sm:h-40 bg-emerald-100 rounded-full -mr-16 sm:-mr-20 -mt-16 sm:-mt-20 opacity-50"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-32 sm:h-32 bg-teal-100 rounded-full -ml-12 sm:-ml-16 -mb-12 sm:-mb-16 opacity-50"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:t.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform",children:t.jsx(D,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})})}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-2",children:"Verifikasi WhatsApp"}),t.jsxs("p",{className:"text-center text-sm sm:text-base text-gray-600 mb-6 sm:mb-8 px-2",children:["Masukkan kode OTP yang dikirim ke",t.jsx("br",{}),t.jsx("span",{className:"font-semibold text-emerald-600",children:b(u)})]}),l.errors.otp&&t.jsx("div",{className:"mb-4 bg-red-100 text-red-700 border border-red-300 px-4 py-3 rounded-lg text-sm",children:l.errors.otp}),l.errors.token&&t.jsx("div",{className:"mb-4 bg-red-100 text-red-700 border border-red-300 px-4 py-3 rounded-lg text-sm",children:"Token tidak valid atau kadaluarsa."}),((f=x().props.flash)==null?void 0:f.error)&&t.jsx("div",{className:"mb-4 bg-red-100 text-red-700 border border-red-300 px-4 py-3 rounded-lg text-sm",children:x().props.flash.error}),t.jsxs("div",{className:"mb-6 sm:mb-8",children:[t.jsx("div",{className:"flex gap-2 sm:gap-3 justify-center mb-4 sm:mb-6",onPaste:w,children:o.map((e,s)=>t.jsx("input",{ref:r=>i.current[s]=r,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:r=>g(s,r.target.value),onKeyDown:r=>j(s,r),className:`w-11 h-11 sm:w-14 sm:h-14 text-center text-xl sm:text-2xl font-bold rounded-lg sm:rounded-xl border-2 transition-all duration-200 outline-none ${n?"border-emerald-500 bg-emerald-50 text-emerald-600":e?"border-emerald-400 bg-emerald-50 text-gray-800":"border-gray-200 bg-white text-gray-800 focus:border-emerald-400 focus:bg-emerald-50"}`,disabled:n},s))}),n?t.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold py-3 sm:py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 text-sm sm:text-base",children:[t.jsx(M,{className:"w-5 h-5"}),"Verifikasi Berhasil!"]}):t.jsx("form",{onSubmit:y,children:t.jsx("button",{type:"submit",disabled:!o.every(e=>e!=="")||l.processing,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold py-3 sm:py-4 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base",children:l.processing?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Memverifikasi..."]}):t.jsxs(t.Fragment,{children:["Verifikasi",t.jsx(C,{className:"w-5 h-5"})]})})})]}),!n&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-2",children:"Tidak menerima kode?"}),t.jsx("button",{onClick:v,className:"text-emerald-600 font-semibold hover:text-emerald-700 transition-colors text-sm sm:text-base",children:"Kirim Ulang Kode"})]})]})]})})})}export{S as default};
